language: php
php:
  - 5.4
  - 5.5

install:
  # Go to the root.
  - cd ../..
  # Clone Drupal core shallowly, as we only need the most recent code.
  - git clone --branch 8.x --depth 1 http://git.drupal.org/project/drupal.git
  # Put Currency in the correct directory.
  - mv bartfeenstra/currency drupal/modules/currency
  # Go to the Drupal root.
  - cd drupal

script:
  # Run Currency's PHPUnit test using Drupal core's configuration and bootstrap.
  - phpunit -c core/phpunit.xml.dist --bootstrap core/tests/bootstrap.php --filter 'Drupal\\currency'
